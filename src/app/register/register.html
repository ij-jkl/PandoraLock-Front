<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 relative">
  <div class="h-6 bg-gradient-to-b from-blue-200/60 to-transparent absolute top-0 left-0 right-0 z-10"></div>

  <div class="flex items-center justify-center px-6 py-6 min-h-screen">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="w-full max-w-md p-10 bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-100 space-y-6">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-900 mb-2">Create Account</h2>
        <p class="text-gray-600">Join PandoraLock today</p>
      </div>

      <div class="space-y-1">
        <label for="email" class="block text-sm font-semibold text-gray-800 mb-3">Email Address</label>
        <div class="relative">
          <input
            id="email"
            type="email"
            formControlName="email"
            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-all duration-300 text-gray-800 bg-gray-50/50 placeholder-gray-400"
            [ngClass]="{
              'border-emerald-400 bg-emerald-50/30 focus:border-emerald-500': email?.valid && email?.touched,
              'border-red-400 bg-red-50/30 focus:border-red-500': email?.invalid && email?.touched
            }"
            placeholder="Enter your email"
            autocomplete="off"
          />
          <div class="absolute right-4 top-1/2 transform -translate-y-1/2" *ngIf="email?.valid && email?.touched">
            <svg class="w-5 h-5 text-emerald-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>
        <div *ngIf="email?.invalid && email?.touched" class="text-red-500 text-sm mt-2 ml-1 flex items-center">
          <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
          </svg>
          <span *ngIf="email?.errors?.['required']">Email is required</span>
          <span *ngIf="email?.errors?.['email']">Please enter a valid email</span>
          <span *ngIf="email?.errors?.['inUse']">Email is already in use</span>
        </div>
      </div>

      <div class="space-y-1">
        <label for="username" class="block text-sm font-semibold text-gray-800 mb-3">Username</label>
        <div class="relative">
          <input
            id="username"
            type="text"
            formControlName="username"
            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-all duration-300 text-gray-800 bg-gray-50/50 placeholder-gray-400"
            [ngClass]="{
              'border-emerald-400 bg-emerald-50/30 focus:border-emerald-500': username?.valid && username?.touched,
              'border-red-400 bg-red-50/30 focus:border-red-500': username?.invalid && username?.touched
            }"
            placeholder="Choose a username"
            autocomplete="off"
          />
          <div class="absolute right-4 top-1/2 transform -translate-y-1/2" *ngIf="username?.valid && username?.touched">
            <svg class="w-5 h-5 text-emerald-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>
        <div *ngIf="username?.invalid && username?.touched" class="text-red-500 text-sm mt-2 ml-1 flex items-center">
          <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
          </svg>
          <span *ngIf="username?.errors?.['required']">Username is required</span>
          <span *ngIf="username?.errors?.['minlength']">Minimum 3 characters</span>
          <span *ngIf="username?.errors?.['inUse']">Username is already in use</span>
        </div>
      </div>

      <div class="space-y-1">
        <label for="password" class="block text-sm font-semibold text-gray-800 mb-3">Password</label>
        <div class="relative">
          <input
            id="password"
            type="password"
            formControlName="password"
            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-all duration-300 text-gray-800 bg-gray-50/50 placeholder-gray-400"
            [ngClass]="{
              'border-emerald-400 bg-emerald-50/30 focus:border-emerald-500': password?.valid && password?.touched,
              'border-red-400 bg-red-50/30 focus:border-red-500': password?.invalid && password?.touched
            }"
            placeholder="Create a strong password"
            autocomplete="off"
          />
          <div class="absolute right-4 top-1/2 transform -translate-y-1/2" *ngIf="password?.valid && password?.touched">
            <svg class="w-5 h-5 text-emerald-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>
        <div class="mt-3 p-4 bg-gradient-to-r from-gray-50 to-blue-50/30 rounded-2xl border border-gray-100" *ngIf="password?.value && (!password?.valid || !password?.touched)">
          <div class="space-y-2">
            <div class="flex items-center text-sm transition-all duration-200" [ngClass]="{'text-emerald-600': passwordErrors.minLength, 'text-gray-500': !passwordErrors.minLength}">
              <div class="w-5 h-5 mr-3 rounded-full flex items-center justify-center transition-all duration-200" [ngClass]="{'bg-emerald-100': passwordErrors.minLength, 'bg-gray-200': !passwordErrors.minLength}">
                <svg class="w-3 h-3" [ngClass]="{'text-emerald-600': passwordErrors.minLength, 'text-gray-400': !passwordErrors.minLength}" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              At least 8 characters
            </div>
            <div class="flex items-center text-sm transition-all duration-200" [ngClass]="{'text-emerald-600': passwordErrors.number, 'text-gray-500': !passwordErrors.number}">
              <div class="w-5 h-5 mr-3 rounded-full flex items-center justify-center transition-all duration-200" [ngClass]="{'bg-emerald-100': passwordErrors.number, 'bg-gray-200': !passwordErrors.number}">
                <svg class="w-3 h-3" [ngClass]="{'text-emerald-600': passwordErrors.number, 'text-gray-400': !passwordErrors.number}" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              At least 1 number
            </div>
            <div class="flex items-center text-sm transition-all duration-200" [ngClass]="{'text-emerald-600': passwordErrors.upper, 'text-gray-500': !passwordErrors.upper}">
              <div class="w-5 h-5 mr-3 rounded-full flex items-center justify-center transition-all duration-200" [ngClass]="{'bg-emerald-100': passwordErrors.upper, 'bg-gray-200': !passwordErrors.upper}">
                <svg class="w-3 h-3" [ngClass]="{'text-emerald-600': passwordErrors.upper, 'text-gray-400': !passwordErrors.upper}" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              At least 1 uppercase letter
            </div>
            <div class="flex items-center text-sm transition-all duration-200" [ngClass]="{'text-emerald-600': passwordErrors.lower, 'text-gray-500': !passwordErrors.lower}">
              <div class="w-5 h-5 mr-3 rounded-full flex items-center justify-center transition-all duration-200" [ngClass]="{'bg-emerald-100': passwordErrors.lower, 'bg-gray-200': !passwordErrors.lower}">
                <svg class="w-3 h-3" [ngClass]="{'text-emerald-600': passwordErrors.lower, 'text-gray-400': !passwordErrors.lower}" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              At least 1 lowercase letter
            </div>
            <div class="flex items-center text-sm transition-all duration-200" [ngClass]="{'text-emerald-600': passwordErrors.symbol, 'text-gray-500': !passwordErrors.symbol}">
              <div class="w-5 h-5 mr-3 rounded-full flex items-center justify-center transition-all duration-200" [ngClass]="{'bg-emerald-100': passwordErrors.symbol, 'bg-gray-200': !passwordErrors.symbol}">
                <svg class="w-3 h-3" [ngClass]="{'text-emerald-600': passwordErrors.symbol, 'text-gray-400': !passwordErrors.symbol}" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              At least 1 special character
            </div>
          </div>
        </div>
        <div *ngIf="password?.invalid && password?.touched" class="text-red-500 text-sm mt-2 ml-1 flex items-center">
          <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
          </svg>
          <span *ngIf="password?.errors?.['required']">Password is required</span>
        </div>
      </div>

      <div class="space-y-1">
        <label for="confirmPassword" class="block text-sm font-semibold text-gray-800 mb-3">Confirm Password</label>
        <div class="relative">
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            class="w-full px-5 py-4 rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-all duration-300 text-gray-800 bg-gray-50/50 placeholder-gray-400"
            [ngClass]="{
              'border-emerald-400 bg-emerald-50/30 focus:border-emerald-500': confirmPassword?.valid && confirmPassword?.touched && !registerForm.errors?.['passwordMismatch'],
              'border-red-400 bg-red-50/30 focus:border-red-500': (confirmPassword?.invalid && confirmPassword?.touched) || (registerForm.errors?.['passwordMismatch'] && confirmPassword?.touched)
            }"
            placeholder="Confirm your password"
            autocomplete="off"
          />
          <div class="absolute right-4 top-1/2 transform -translate-y-1/2" *ngIf="confirmPassword?.valid && confirmPassword?.touched && !registerForm.errors?.['passwordMismatch']">
            <svg class="w-5 h-5 text-emerald-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>

        <div *ngIf="(confirmPassword?.invalid && confirmPassword?.touched) || (registerForm.errors?.['passwordMismatch'] && confirmPassword?.touched)" class="text-red-500 text-sm mt-2 ml-1 flex items-center">
          <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
          </svg>
          <span *ngIf="confirmPassword?.errors?.['required']">Please confirm your password</span>
          <span *ngIf="registerForm.errors?.['passwordMismatch']">Passwords don't match</span>
        </div>
      </div>

      <app-success-message
        [isVisible]="showSuccess"
        message="Correctly registered">
      </app-success-message>

      <button
        type="submit"
        class="w-full mt-8 px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold text-lg rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-lg"
        [disabled]="registerForm.invalid || isLoading"
      >
        <app-loading-spinner
          [isVisible]="isLoading"
          message="Creating account...">
        </app-loading-spinner>

        <span class="flex items-center justify-center" *ngIf="!isLoading">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          Create Account
        </span>
      </button>

      <div class="text-center mt-6">
        <p class="text-sm text-gray-600">
          Already have an account?
          <a href="#" class="font-semibold text-blue-600 hover:text-blue-700 transition-colors duration-200">Sign in</a>
        </p>
      </div>
    </form>
  </div>

  <div class="h-6 bg-gradient-to-t from-blue-200/60 to-transparent absolute bottom-0 left-0 right-0 z-10"></div>
</div>
